webpackJsonp([1],{"9M+g":function(t,e){},A9cP:function(t,e){},L3Pw:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("L3Pw")},null,null).exports,r=s("/ocq"),o=s("mtWM"),l=s.n(o),c="https://beresid.com",d={BASE_URL:c,LOGIN:c+"/ResolveCallerDynamicID",GEN_TOKEN:c+"/NewCallerToken",LIST_CALLEESS:c+"/ListCallees",PURGE_CALLEES:c+"/PurgeCallees",UPSERT_CALL:c+"/UpsertCall",GET_CALLER:c+"/GetCaller",PATCH_CALLER:c+"/PatchCaller"},u={name:"Login",data:function(){return{userName:null,password:null,loading:!1,errored:!1}},mounted:function(){},methods:{loginTap:function(t){var e=this;if(this.userName&&this.password){this.loading=!0;var s={dynamicID:this.userName};l.a.post(d.LOGIN,s).then(function(t){console.log(t),200==t.status?(localStorage.id=t.data.staticID,e.genToken(t.data.staticID)):e.hasError()}).catch(function(t){e.hasError(),console.log(t)})}},genToken:function(t){var e=this,s={staticID:t,pwd:this.password};l.a.post(d.GEN_TOKEN,s).then(function(t){console.log(t),200==t.status?(e.loading=!1,localStorage.token=t.data.token,localStorage.userName=e.userName,console.log(t.data.token),e.$router.replace({path:"/home"})):e.hasError()}).catch(function(t){e.hasError(),console.log(t)})},hasError:function(){var t=this;this.loading=!1,this.errored=!0,setTimeout(function(){t.errored=!1},4e3)}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("form",{staticClass:"form-signin pt-5"},[s("svg",{staticClass:"mt-5",attrs:{width:"177",height:"100",viewBox:"0 0 177 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("circle",{attrs:{cx:"72",cy:"50",r:"30",fill:"#68DBFF"}}),t._v(" "),s("ellipse",{attrs:{cx:"104.647",cy:"50",rx:"29.7059",ry:"30",fill:"#FF7917"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M88.4039 75.1221C96.5911 69.7652 102 60.5143 102 50C102 39.4858 96.5911 30.2348 88.4039 24.878C80.2971 30.2348 74.9412 39.4858 74.9412 50C74.9412 60.5143 80.2971 69.7652 88.4039 75.1221Z",fill:"#5D2C02"}})]),t._v(" "),s("h1",{staticClass:"h3 mb-5 font-weight-bold"},[t._v("Beresid")]),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"inputUserName"}},[t._v("نام کاربری")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"form-control text-right",attrs:{type:"text",id:"inputUserName",placeholder:"نام کاربری",required:"",autofocus:""},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("رمز عبور")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control text-right",attrs:{type:"password",id:"inputPassword",placeholder:"رمز عبور",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-lg btn-block mt-4 btn-success submit",attrs:{disabled:!!t.loading,type:"submit"},on:{click:t.loginTap}},[t.loading?s("span",{staticClass:"spinner-border spinner-border-sm mb-1",attrs:{role:"status","aria-hidden":"true"}}):s("span",[t._v("ورود")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errored,expression:"errored"}],staticClass:"alert alert-danger mt-2 font"},[s("strong",[t._v("خطا!")]),t._v(" "),s("span",[t._v("نام کاربری یا رمز عبور اشتباه است")])])])])},staticRenderFns:[]};var v=s("VU/8")(u,m,!1,function(t){s("A9cP")},"data-v-4fe2990a",null).exports,f={name:"NavMenu",data:function(){return{loading:!1,errored:!1,errorMsg:"",currentMenuItem:0,catModalName:null,itemModalName:null,itemModalDesc:null,itemModalPrice:null,menus:{}}},mounted:function(){this.caller()},methods:{caller:function(t){var e=this,s={staticID:localStorage.id};l.a.post(d.GET_CALLER,s,{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){console.log(t),200==t.status?e.menus=t.data:e.hasError("لطفا مجددا تلاش کنید")}).catch(function(t){e.hasError("لطفا مجددا تلاش کنید"),console.log(t)})},patchCaller:function(t){l.a.post(d.PATCH_CALLER,this.menus,{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},hasError:function(t){var e=this;this.errorMsg=t,this.errored=!0,setTimeout(function(){e.errored=!1},3e3)},resetModal:function(){this.catModalName=null},hideModal:function(){this.$refs.modal.hide()},submitModal:function(){if(this.catModalName){var t={name:this.catModalName,items:[]};this.menus.menu.push(t),this.patchCaller(),this.hideModal(),this.resetModal()}},resetItemsModal:function(){this.itemModalName=null,this.itemModalDesc=null,this.itemModalPrice=null},hideItemsModal:function(){this.$refs.modalitems.hide()},submitItemsModal:function(){if(this.itemModalName&&this.itemModalDesc&&this.itemModalPrice){var t={name:this.itemModalName,price:this.itemModalPrice,desc:this.itemModalDesc};this.menus.menu[this.currentMenuItem].items.push(t),this.patchCaller(),this.hideItemsModal(),this.resetItemsModal()}},removeItem:function(t){this.menus.menu[this.currentMenuItem].items.splice(t,1),this.patchCaller()}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navmenu"},[s("div",{staticClass:"d-flex flex-row justify-content-center align-items-start mt-5"},[s("div",{staticClass:"card cardView text-right mb-4 w-50 mt-5 mr-3"},[s("div",{staticClass:"card-header d-flex flex-row justify-content-between"},[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-items",modifiers:{"modal-items":!0}}],staticClass:"btn btn-success removeSize",attrs:{type:"submit"}},[t._v("\n          افزودن\n        ")]),t._v(" "),s("span",{staticClass:"fontBold"},[t._v(t._s(t.menus.menu[t.currentMenuItem].name))])]),t._v(" "),s("div",{staticClass:"card-body bg-transparent p-0 m-0 text-center"},[0==t.menus.menu[t.currentMenuItem].items.length?s("div",{staticClass:"text-secondary mt-3 mb-3 p-0",staticStyle:{"font-size":"14px"}},[t._v("موردی یافت نشد")]):t._l(t.menus.menu[t.currentMenuItem].items,function(e,a){return s("div",{key:e.name,staticClass:"d-flex flex-column"},[s("hr",{staticClass:"m-0 p-0",staticStyle:{width:"100%"}}),t._v(" "),s("div",{staticClass:"d-flex flex-row justify-content-between align-items-center pl-4 pr-4 pt-2"},[s("div",{staticClass:"d-flex flex-row"},[s("span",{staticClass:"fontBold text-danger itemDelete mr-5",on:{click:function(e){return t.removeItem(a)}}},[t._v("حذف")]),t._v(" "),s("span",{staticClass:"fontBold text-info itemDelete mr-5"},[t._v("ویرایش")]),t._v(" "),s("span",{staticClass:"fontBold text-success",staticStyle:{"font-size":"13px"},attrs:{dir:"rtl"}},[t._v(t._s(e.price)+" ت")])]),t._v(" "),s("div",{staticClass:"d-flex flex-column"},[s("span",{staticClass:"fontBold text-dark text-right",staticStyle:{"font-size":"14px"}},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"text-secondary text-right",staticStyle:{"font-size":"12px"}},[t._v(t._s(e.desc))])])])])})],2)]),t._v(" "),s("div",{staticClass:"cardView text-right",staticStyle:{width:"135px"}},[s("div",{staticClass:"card-header bg-transparent fontBold pr-0 pl-0",staticStyle:{border:"none"}},[s("div",{staticClass:"d-flex flex-row justify-content-between"},[s("span",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"text-success",staticStyle:{"font-size":"11px","padding-top":"3px",cursor:"pointer",outline:"none !important"}},[t._v("جدید")]),t._v(" "),s("span",[t._v("منو")])])]),t._v(" "),s("div",{staticClass:"bg-transparent"},[s("div",{staticClass:"d-flex flex-column fontBold"},t._l(t.menus.menu,function(e,a){return s("button",{key:e.name,staticClass:"btn btn-deactive",class:{"btn-active":a==t.currentMenuItem},attrs:{type:"button"},on:{click:function(e){t.currentMenuItem=a}}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),0)])])]),t._v(" "),s("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"دسته بندی جدید","content-class":"font"},on:{show:t.resetModal,hidden:t.resetModal},scopedSlots:t._u([{key:"modal-header",fn:function(){return[s("div",{staticClass:"d-flex justify-content-end w-100"},[s("span",{staticClass:"fontBold p-0"},[t._v("دسته بندی جدید")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[s("div",{staticClass:"d-flex justify-content-start w-100"},[s("b-button",{staticClass:"font",staticStyle:{width:"60px"},attrs:{variant:"success",size:"sm"},on:{click:t.submitModal}},[t._v("\n          ثبت\n        ")]),t._v(" "),s("b-button",{staticClass:"font ml-2",staticStyle:{width:"60px"},attrs:{variant:"light",size:"sm"},on:{click:t.hideModal}},[t._v("\n          لغو\n        ")])],1)]},proxy:!0}])},[s("form",{ref:"form",staticClass:"fontBold",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.submitModal(e)}}},[s("b-form-group",{staticClass:"text-right labelSize",attrs:{label:"عنوان","label-for":"name-input","invalid-feedback":"Name is required"}},[s("b-form-input",{staticClass:"text-right inputSize",attrs:{id:"name-input",autofocus:"",required:""},model:{value:t.catModalName,callback:function(e){t.catModalName=e},expression:"catModalName"}})],1)],1)]),t._v(" "),s("b-modal",{ref:"modalitems",attrs:{id:"modal-items",title:"افزودن محصول","content-class":"font"},on:{show:t.resetModal,hidden:t.resetModal},scopedSlots:t._u([{key:"modal-header",fn:function(){return[s("div",{staticClass:"d-flex justify-content-end w-100"},[s("span",{staticClass:"fontBold p-0"},[t._v("افزودن محصول")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[s("div",{staticClass:"d-flex justify-content-start w-100"},[s("b-button",{staticClass:"font",staticStyle:{width:"60px"},attrs:{variant:"success",size:"sm"},on:{click:t.submitItemsModal}},[t._v("\n          ثبت\n        ")]),t._v(" "),s("b-button",{staticClass:"font ml-2",staticStyle:{width:"60px"},attrs:{variant:"light",size:"sm"},on:{click:t.hideItemsModal}},[t._v("\n          لغو\n        ")])],1)]},proxy:!0}])},[s("form",{ref:"form",staticClass:"fontBold",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.submitModal(e)}}},[s("b-form-group",{staticClass:"text-right labelSize",attrs:{label:"عنوان","label-for":"name-input","invalid-feedback":"Name is required"}},[s("b-form-input",{staticClass:"text-right inputSize",attrs:{id:"name-input",autofocus:"",required:""},model:{value:t.itemModalName,callback:function(e){t.itemModalName=e},expression:"itemModalName"}})],1),t._v(" "),s("b-form-group",{staticClass:"text-right labelSize",attrs:{label:"توضیحات","label-for":"desc-input","invalid-feedback":"Name is required"}},[s("b-form-input",{staticClass:"text-right inputSize",attrs:{id:"desc-input",required:""},model:{value:t.itemModalDesc,callback:function(e){t.itemModalDesc=e},expression:"itemModalDesc"}})],1),t._v(" "),s("b-form-group",{staticClass:"text-right labelSize",attrs:{label:"قیمت","label-for":"price-input","invalid-feedback":"Name is required"}},[s("b-form-input",{staticClass:"text-right inputSize",attrs:{id:"price-input",type:"number",required:""},model:{value:t.itemModalPrice,callback:function(e){t.itemModalPrice=e},expression:"itemModalPrice"}})],1)],1)])],1)},staticRenderFns:[]};var h={name:"NavResid",data:function(){return{code:"",msg:"",submitloading:!1,errored:!1,errorMsg:"",callees:[]}},mounted:function(){this.getCalleesList()},methods:{getCalleesList:function(t){var e=this;l.a.post(d.LIST_CALLEESS,{filter:{},sort:[["callAt",1]],skip:0,limit:50},{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){console.log(t),200==t.status?e.callees=t.data:e.hasError("لطفا مجددا تلاش کنید")}).catch(function(t){e.hasError("لطفا مجددا تلاش کنید"),console.log(t)})},purgeCalless:function(t){var e=this;this.callees=this.callees.filter(function(e){return e.code!==t});var s={filter:{code:t}};l.a.post(d.PURGE_CALLEES,s,{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){console.log(t),200==t.status?e.getCalleesList():e.hasError("لطفا مجددا تلاش کنید")}).catch(function(t){e.hasError("لطفا مجددا تلاش کنید"),console.log(t)})},purgeAllCalless:function(){var t=this;l.a.post(d.PURGE_CALLEES,{filter:{}},{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(e){console.log(e),200==e.status?t.getCalleesList():t.hasError("لطفا مجددا تلاش کنید")}).catch(function(e){t.hasError("لطفا مجددا تلاش کنید"),console.log(e)})},upsertCallTap:function(t){var e=this;if(this.code&&this.msg){this.submitloading=!0;var s={code:this.code,msg:this.msg};l.a.post(d.UPSERT_CALL,s,{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){e.submitloading=!1,console.log(t),202==t.status?(e.code="",e.msg="",e.getCalleesList()):e.hasError("لطفا مجددا تلاش کنید")}).catch(function(t){e.hasError("لطفا مجددا تلاش کنید"),e.submitloading=!1,console.log(t)})}},hasError:function(t){var e=this;this.errorMsg=t,this.errored=!0,setTimeout(function(){e.errored=!1},3e3)}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navresid"},[s("div",{staticClass:"d-flex flex-column justify-content-center align-items-center mt-5"},[s("div",{staticClass:"card cardView text-right w-50"},[s("div",{staticClass:"card-header fontBold"},[t._v("ثبت رسید")]),t._v(" "),s("div",{staticClass:"card-body bg-transparent"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{staticClass:"labelSize mb-0",attrs:{for:"formGroupExampleInput"}},[t._v("شماره رسید")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control text-right inputSize",attrs:{type:"number",id:"formGroupExampleInput",placeholder:"شماره رسید",required:""},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"labelSize mb-0",attrs:{for:"formGroupExampleInput2"}},[t._v("پیام")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"form-control text-right inputSize",attrs:{type:"text",id:"formGroupExampleInput2",placeholder:"پیام",required:""},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-success fontBold pl-3 pr-3",attrs:{type:"submit",disabled:!!t.submitloading},on:{click:t.upsertCallTap}},[t.submitloading?s("span",{staticClass:"spinner-border spinner-border-sm mb-1",attrs:{role:"status","aria-hidden":"true"}}):s("span",[t._v("ثبت")])])])])]),t._v(" "),s("div",{staticClass:"card cardView text-right w-50 mt-4 mb-4"},[s("div",{staticClass:"card-header d-flex flex-row justify-content-between"},[s("button",{staticClass:"btn btn-danger removeSize",attrs:{type:"submit"},on:{click:t.purgeAllCalless}},[t._v("\n          حذف همه\n        ")]),t._v(" "),s("span",{staticClass:"fontBold"},[t._v("رسید ها")])]),t._v(" "),s("div",{staticClass:"card-body bg-transparent p-0 m-0 pb-1 text-center"},[0==t.callees.length?s("div",{staticClass:"text-secondary mt-3 mb-3",staticStyle:{"font-size":"14px"}},[t._v("موردی یافت نشد")]):t._l(t.callees,function(e){return s("div",{key:e.code,staticClass:"d-flex flex-column"},[s("hr",{staticClass:"m-0 p-0",staticStyle:{width:"100%"}}),t._v(" "),s("div",{staticClass:"d-flex flex-row justify-content-between align-items-center pl-4 pr-4 pt-2"},[s("span",{staticClass:"fontBold text-danger itemDelete",on:{click:function(s){return t.purgeCalless(e.code)}}},[t._v("حذف")]),t._v(" "),s("div",{staticClass:"d-flex flex-column text-right"},[s("span",{staticClass:"fontBold text-dark",staticStyle:{"font-size":"14px"}},[t._v(t._s(e.code))]),t._v(" "),s("span",{staticClass:"text-secondary",staticStyle:{"font-size":"14px"}},[t._v(t._s(e.msg))])])])])})],2)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errored,expression:"errored"}],staticClass:"alert alert-danger mt-2 font w-50 fixed-bottom mx-auto"},[s("strong",[t._v("خطا!")]),t._v(" "),s("span",[t._v(t._s(t.errorMsg))])])])},staticRenderFns:[]};var C={name:"Home",components:{navMenu:s("VU/8")(f,p,!1,function(t){s("nzPJ")},"data-v-546cef1c",null).exports,navResid:s("VU/8")(h,g,!1,function(t){s("t7WQ")},"data-v-0cda9cac",null).exports},data:function(){return{userName:"",loading:!1,errored:!1,errors:[],navItem1:!0,navItem2:!1}},mounted:function(){this.userName=localStorage.userName},methods:{logoutTap:function(t){localStorage.clear(),this.$router.replace({path:"/"})},navItem1Tap:function(t){this.navItem1=!0,this.navItem2=!1},navItem2Tap:function(t){this.navItem1=!1,this.navItem2=!0}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("div",{staticClass:"sidenav d-flex align-items-end flex-column align-items-stretch pb-2"},[s("div",{staticClass:"d-flex flex-column align-items-center navUser"},[s("i",{staticClass:"fas fa-user-circle navUserIcon"}),t._v(" "),s("span",{staticClass:"pt-2"},[t._v(t._s(t.userName))])]),t._v(" "),s("hr",{staticClass:"divider"}),t._v(" "),s("div",{staticClass:"d-flex flex-row-reverse align-items-center pr-4 navitem",class:{active:t.navItem1},on:{click:t.navItem1Tap}},[s("i",{staticClass:"fas fa-clipboard-list navicon"}),t._v(" "),s("div",{staticClass:"pr-3 pt-1 pb-0"},[t._v("رسید ها")])]),t._v(" "),s("div",{staticClass:"d-flex flex-row-reverse align-items-center pr-4 navitem",class:{active:t.navItem2},on:{click:t.navItem2Tap}},[s("i",{staticClass:"fas fa-sitemap"}),t._v(" "),s("div",{staticClass:"pr-3 pt-1 pb-0"},[t._v("منو")])]),t._v(" "),s("div",{staticClass:"mt-auto d-flex flex-row-reverse align-items-center pr-4 navitem",on:{click:t.logoutTap}},[s("i",{staticClass:"fas fa-sign-out-alt"}),t._v(" "),s("div",{staticClass:"pr-3 pt-1 pb-0"},[t._v("خروج")])])]),t._v(" "),s("div",{staticClass:"main"},[s("navResid",{directives:[{name:"show",rawName:"v-show",value:t.navItem1,expression:"navItem1"}]}),t._v(" "),s("navMenu",{directives:[{name:"show",rawName:"v-show",value:t.navItem2,expression:"navItem2"}]})],1)])},staticRenderFns:[]};var _=s("VU/8")(C,b,!1,function(t){s("OBNU")},"data-v-3caede32",null).exports;a.default.use(r.a);var x=new r.a({routes:[{path:"/",name:"Login",component:v},{path:"/home",name:"Home",component:_}]}),w=s("Tqaz"),M=(s("qb6w"),s("9M+g"),s("DWlv")),y=s.n(M);s("ao2D"),s("rk6y");a.default.config.productionTip=!1,a.default.use(w.a),a.default.use(y.a,l.a),new a.default({el:"#app",router:x,components:{App:n},template:"<App/>"})},OBNU:function(t,e){},ao2D:function(t,e){},nzPJ:function(t,e){},qb6w:function(t,e){},t7WQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.046103980eff39af2102.js.map